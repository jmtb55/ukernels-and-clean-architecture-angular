function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _createForOfIteratorHelper(t,n){var e;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=_unsupportedIterableToArray(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,a=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return l=t.done,t},e:function(t){a=!0,r=t},f:function(){try{l||null==e.return||e.return()}finally{if(a)throw r}}}}function _unsupportedIterableToArray(t,n){if(t){if("string"==typeof t)return _arrayLikeToArray(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?_arrayLikeToArray(t,n):void 0}}function _arrayLikeToArray(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=t[e];return i}function _inherits(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&_setPrototypeOf(t,n)}function _setPrototypeOf(t,n){return(_setPrototypeOf=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function _createSuper(t){var n=_isNativeReflectConstruct();return function(){var e,i=_getPrototypeOf(t);if(n){var o=_getPrototypeOf(this).constructor;e=Reflect.construct(i,arguments,o)}else e=i.apply(this,arguments);return _possibleConstructorReturn(this,e)}}function _possibleConstructorReturn(t,n){return!n||"object"!=typeof n&&"function"!=typeof n?_assertThisInitialized(t):n}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,n,e){return n&&_defineProperties(t.prototype,n),e&&_defineProperties(t,e),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{sFDi:function(t,n,e){"use strict";e.r(n);var i=e("8Y7J"),o=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}(),r=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}(),l=e("IzEk"),a=function(t){_inherits(e,t);var n=_createSuper(e);function e(t){var i;return _classCallCheck(this,e),(i=n.call(this,t)).svgFileName="",i.selected=!1,t&&i._adaptFrom(t),i}return _createClass(e,[{key:"_adaptFrom",value:function(t){t.name&&"string"==typeof name&&(this.svgFileName="".concat(t.name.toLowerCase(),".svg"))}}]),e}(function(){function t(n){_classCallCheck(this,t),this.value="",this.label="",n&&this.adaptFrom(n)}return _createClass(t,[{key:"adaptFrom",value:function(t){t.id?this.value=t.id:t.value&&(this.value=t.value),t.label?this.label=t.label:t.displayName?this.label=t.displayName:t.name&&(this.label=t.name)}}]),t}()),u=function(){function t(n){_classCallCheck(this,t),this.id="",this.name="",this.creationDate=Date.now(),this.toppings=[],n&&this.adaptFrom(n)}return _createClass(t,[{key:"adaptFrom",value:function(t){t&&(this.id=t.id?String(t.id):"",this.name=t.name?String(t.name):"",this.creationDate=t.date?parseInt(String(t.date)):Date.now(),t.toppings&&Array.isArray(t.toppings)&&(this.toppings=t.toppings.map((function(t){return new a(t)}))))}}]),t}(),s=function(){function t(n){_classCallCheck(this,t),this.route=n,this.product=void 0,this.action="create"}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.product=void 0,this.action="create",this.route.params.pipe(Object(l.a)(1)).subscribe((function(n){n.id?(t.product=new u({id:n.id}),t.action="update"):(t.product=new u({}),t.action="create")}))}}]),t}(),c=function t(){_classCallCheck(this,t)},h=e("pMnS"),d=e("iInd"),f=i["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:flex;flex:1;flex-direction:column;position:relative}"]],data:{}});function p(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),i["\u0275did"](1,212992,null,0,d.n,[d.b,i.ViewContainerRef,i.ComponentFactoryResolver,[8,null],i.ChangeDetectorRef],null,null)],(function(t,n){t(n,1,0)}),null)}var g=i["\u0275ccf"]("ng-component",o,(function(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,p,f)),i["\u0275did"](1,114688,null,0,o,[],null,null)],(function(t,n){t(n,1,0)}),null)}),{},{},[]),v=e("SVse"),y=e("GS7A");Object(y.trigger)("drop",[Object(y.transition)(":enter",[Object(y.style)({transform:"translateY(-200px)",opacity:0}),Object(y.animate)("300ms cubic-bezier(1.000, 0.000, 0.000, 1.000)",Object(y.style)({transform:"translateY(0)",opacity:1}))]),Object(y.transition)(":leave",[Object(y.style)({transform:"translateY(0)",opacity:1}),Object(y.animate)("200ms cubic-bezier(1.000, 0.000, 0.000, 1.000)",Object(y.style)({transform:"translateY(-200px)",opacity:0}))])]);var m=function(){function t(n){_classCallCheck(this,t),this.changeDetectorRef=n,this.edit=new i.EventEmitter,this.loaded=!1,this.loading=!1,this.enableEditAction=!0}return _createClass(t,[{key:"refreshRender",value:function(){var t=this;setTimeout((function(){Promise.resolve(null).then((function(){t.changeDetectorRef.markForCheck()}))}),17)}},{key:"shortenString",value:function(t,n){return null==t||void 0===t.length?"":t.length>n?"".concat(t.substr(0,n),"..."):t}},{key:"onEditButtonClick",value:function(){this._product&&this.edit.emit(this._product)}},{key:"product",set:function(t){this._product=t,t&&(this.loaded=!0,this.refreshRender())},get:function(){return this._product}},{key:"name",get:function(){return this._product?this.shortenString(this._product.name,14):""}}]),t}(),_=i["\u0275crt"]({encapsulation:0,styles:[[".pizza[_ngcontent-%COMP%], [_nghost-%COMP%]{display:inline-block;width:225px;height:203px;position:relative}.pizza[_ngcontent-%COMP%]{height:159px;cursor:pointer}.toppings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.topping-single[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;justify-content:center}.topping-single[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px;height:auto}.topping-single[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font:cornerstone;color:#333;font-size:12px}.pizza[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.pizza-text[_ngcontent-%COMP%]{font-family:cornerstone;color:#333;font-size:22px;text-align:center}.pizza-text[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{cursor:pointer;height:18px}"]],data:{animation:[{type:7,name:"drop",definitions:[{type:1,expr:":enter",animation:[{type:6,styles:{transform:"translateY(-200px)",opacity:0},offset:null},{type:4,styles:{type:6,styles:{transform:"translateY(0)",opacity:1},offset:null},timings:"300ms cubic-bezier(1.000, 0.000, 0.000, 1.000)"}],options:null},{type:1,expr:":leave",animation:[{type:6,styles:{transform:"translateY(0)",opacity:1},offset:null},{type:4,styles:{type:6,styles:{transform:"translateY(-200px)",opacity:0},offset:null},timings:"200ms cubic-bezier(1.000, 0.000, 0.000, 1.000)"}],options:null}],options:{}}]}});function C(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,0,"img",[["class","pizza-topping"]],[[8,"src",4],[4,"zIndex",null],[24,"@drop",0]],null,null,null,null))],null,(function(t,n){t(n,0,0,i["\u0275inlineInterpolate"](1,"/assets/img/pizza-toppings/",n.context.$implicit.svgFileName,""),2+n.context.index,void 0)}))}function k(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,C)),i["\u0275did"](2,278528,null,0,v.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(t()(),i["\u0275and"](0,null,null,0))],(function(t,n){t(n,2,0,n.component._product.toppings)}),null)}function b(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,3,"div",[["class","pizza"]],[[8,"title",0]],[[null,"click"]],(function(t,n,e){var i=!0,o=t.component;return"click"===n&&(i=!1!==(o.enableEditAction?o.onEditButtonClick():null)&&i),i}),null,null)),(t()(),i["\u0275eld"](1,0,null,null,0,"img",[["class","pizza-base"],["src","/assets/img/base-pizza.svg"]],[[4,"zIndex",null]],null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,k)),i["\u0275did"](3,16384,null,0,v.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(t,n){var e=n.component;t(n,3,0,e._product.toppings&&e._product.toppings.length)}),(function(t,n){t(n,0,0,n.component.enableEditAction?"Editar Pizza":null),t(n,1,0,1)}))}function O(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"div",[["class","pizza-text"]],null,null,null,null,null)),(t()(),i["\u0275ted"](1,null,[" "," "])),(t()(),i["\u0275eld"](2,0,null,null,0,"img",[["src","/assets/img/edit.svg"],["title","Editar Pizza"]],null,[[null,"click"]],(function(t,n,e){var i=!0;return"click"===n&&(i=!1!==t.component.onEditButtonClick()&&i),i}),null,null))],null,(function(t,n){t(n,1,0,n.component.name)}))}function w(t){return i["\u0275vid"](2,[(t()(),i["\u0275and"](16777216,null,null,1,null,b)),i["\u0275did"](1,16384,null,0,v.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,O)),i["\u0275did"](3,16384,null,0,v.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(t,n){var e=n.component;t(n,1,0,e.loaded&&e._product),t(n,3,0,e.loaded&&e.enableEditAction)}),null)}var V=function(){function t(n,e,i){_classCallCheck(this,t),this.router=n,this.presenter=e,this.changeDetectorRef=i,this.loaded=!1,this.loading=!1,this.products=[]}return _createClass(t,[{key:"ngOnInit",value:function(){this.presenter.controller=this}},{key:"refreshRender",value:function(){var t=this;setTimeout((function(){Promise.resolve(null).then((function(){t.changeDetectorRef.markForCheck()}))}),17)}},{key:"onNewPizzaButtonClick",value:function(){this.router.navigate(["/products/pizza/new"])}},{key:"onEditButtonClick",value:function(t){this.router.navigate(["/products/pizza/".concat(t.id)])}}]),t}(),A=function(){function t(n){_classCallCheck(this,t),this.domain=n}return _createClass(t,[{key:"initializeController",value:function(){this._controller&&(this._controller.loaded=!1,this._controller.loading=!0),this.domain.readAll().pipe(Object(l.a)(1)).subscribe({next:this.initializeController2.bind(this),error:this.initializeControllerError.bind(this),complete:this.controllerRefreshRender.bind(this)})}},{key:"controllerRefreshRender",value:function(){this._controller&&this._controller.refreshRender()}},{key:"initializeControllerError",value:function(t){this._controller&&(this._controller.loading=!1,this._controller.loaded=!0,this._controller.products=[]),console.log("Error @product-list-presenter: ",t.message)}},{key:"initializeController2",value:function(t){this._controller&&(this._controller.loaded=!0,this._controller.loading=!1,this._controller.products=t)}},{key:"controller",set:function(t){this._controller=t,this.initializeController()},get:function(){return this._controller}}]),t}(),E=i["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:flex;flex:1;flex-direction:column;position:relative;width:100%;overflow-y:hidden}.products-list[_ngcontent-%COMP%]{display:flex;flex:1 0 auto;flex-direction:row;margin:22px;position:relative;overflow-y:auto;flex-wrap:wrap;max-height:406px}.products-list[_ngcontent-%COMP%] > app-product-pizza-display-component[_ngcontent-%COMP%]{margin-right:22px}.action[_ngcontent-%COMP%]{margin-top:22px;margin-left:22px}.action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;height:22px;border:0;background-color:#08503f;border-radius:4px;font-family:cornerstone;font-size:12px;color:#fff}.action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0f9675}"]],data:{}});function P(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"app-product-pizza-display-component",[],null,[[null,"edit"]],(function(t,n,e){var i=!0;return"edit"===n&&(i=!1!==t.component.onEditButtonClick(e)&&i),i}),w,_)),i["\u0275did"](1,49152,null,0,m,[i.ChangeDetectorRef],{product:[0,"product"]},{edit:"edit"})],(function(t,n){t(n,1,0,n.context.$implicit)}),null)}function z(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,P)),i["\u0275did"](2,278528,null,0,v.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(t()(),i["\u0275and"](0,null,null,0))],(function(t,n){t(n,2,0,n.component.products)}),null)}function S(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"div",[["class","products-list"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,z)),i["\u0275did"](2,16384,null,0,v.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(t,n){var e=n.component;t(n,2,0,e.products&&e.products.length)}),null)}function x(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"div",[["class","action"]],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,1,"button",[],null,[[null,"click"]],(function(t,n,e){var i=!0;return"click"===n&&(i=!1!==t.component.onNewPizzaButtonClick()&&i),i}),null,null)),(t()(),i["\u0275ted"](-1,null,["Nueva Pizza"])),(t()(),i["\u0275and"](16777216,null,null,1,null,S)),i["\u0275did"](4,16384,null,0,v.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(t,n){t(n,4,0,n.component.loaded)}),null)}var I=i["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:flex;flex:1;flex-direction:column;position:relative}"]],data:{}});function M(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"app-products-list-component",[],null,null,null,x,E)),i["\u0275did"](1,114688,null,0,V,[d.k,A,i.ChangeDetectorRef],null,null)],(function(t,n){t(n,1,0)}),null)}var D=i["\u0275ccf"]("ng-component",r,(function(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,M,I)),i["\u0275did"](1,114688,null,0,r,[],null,null)],(function(t,n){t(n,1,0)}),null)}),{},{},[]),N=e("cUpR"),R=e("cp0P"),T=e("Cfvw"),F=e("lJxs"),j=new i.InjectionToken("NgValueAccessor"),G=new i.InjectionToken("CompositionEventMode"),L=function(){function t(n,e,i){var o;_classCallCheck(this,t),this._renderer=n,this._elementRef=e,this._compositionMode=i,this.onChange=function(t){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(o=Object(N["\u0275getDOM"])()?Object(N["\u0275getDOM"])().getUserAgent():"",!/android (\d+)/.test(o.toLowerCase())))}return _createClass(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}},{key:"registerOnChange",value:function(t){this.onChange=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_handleInput",value:function(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}},{key:"_compositionStart",value:function(){this._composing=!0}},{key:"_compositionEnd",value:function(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}]),t}(),W=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"reset",value:function(t){this.control&&this.control.reset(t)}},{key:"hasError",value:function(t,n){return!!this.control&&this.control.hasError(t,n)}},{key:"getError",value:function(t,n){return this.control?this.control.getError(t,n):null}},{key:"value",get:function(){return this.control?this.control.value:null}},{key:"valid",get:function(){return this.control?this.control.valid:null}},{key:"invalid",get:function(){return this.control?this.control.invalid:null}},{key:"pending",get:function(){return this.control?this.control.pending:null}},{key:"disabled",get:function(){return this.control?this.control.disabled:null}},{key:"enabled",get:function(){return this.control?this.control.enabled:null}},{key:"errors",get:function(){return this.control?this.control.errors:null}},{key:"pristine",get:function(){return this.control?this.control.pristine:null}},{key:"dirty",get:function(){return this.control?this.control.dirty:null}},{key:"touched",get:function(){return this.control?this.control.touched:null}},{key:"status",get:function(){return this.control?this.control.status:null}},{key:"untouched",get:function(){return this.control?this.control.untouched:null}},{key:"statusChanges",get:function(){return this.control?this.control.statusChanges:null}},{key:"valueChanges",get:function(){return this.control?this.control.valueChanges:null}},{key:"path",get:function(){return null}}]),t}(),U=function(t){_inherits(e,t);var n=_createSuper(e);function e(){return _classCallCheck(this,e),n.apply(this,arguments)}return _createClass(e,[{key:"formDirective",get:function(){return null}},{key:"path",get:function(){return null}}]),e}(W);function B(){throw new Error("unimplemented")}var $=function(t){_inherits(e,t);var n=_createSuper(e);function e(){var t;return _classCallCheck(this,e),(t=n.apply(this,arguments))._parent=null,t.name=null,t.valueAccessor=null,t._rawValidators=[],t._rawAsyncValidators=[],t}return _createClass(e,[{key:"validator",get:function(){return B()}},{key:"asyncValidator",get:function(){return B()}}]),e}(W),Y=function(){function t(n){_classCallCheck(this,t),this._cd=n}return _createClass(t,[{key:"ngClassUntouched",get:function(){return!!this._cd.control&&this._cd.control.untouched}},{key:"ngClassTouched",get:function(){return!!this._cd.control&&this._cd.control.touched}},{key:"ngClassPristine",get:function(){return!!this._cd.control&&this._cd.control.pristine}},{key:"ngClassDirty",get:function(){return!!this._cd.control&&this._cd.control.dirty}},{key:"ngClassValid",get:function(){return!!this._cd.control&&this._cd.control.valid}},{key:"ngClassInvalid",get:function(){return!!this._cd.control&&this._cd.control.invalid}},{key:"ngClassPending",get:function(){return!!this._cd.control&&this._cd.control.pending}}]),t}(),q=function(t){_inherits(e,t);var n=_createSuper(e);function e(t){return _classCallCheck(this,e),n.call(this,t)}return e}(Y),J=function(t){_inherits(e,t);var n=_createSuper(e);function e(t){return _classCallCheck(this,e),n.call(this,t)}return e}(Y);function Z(t){return null==t||0===t.length}var H=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,K=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"min",value:function(t){return function(n){if(Z(n.value)||Z(t))return null;var e=parseFloat(n.value);return!isNaN(e)&&e<t?{min:{min:t,actual:n.value}}:null}}},{key:"max",value:function(t){return function(n){if(Z(n.value)||Z(t))return null;var e=parseFloat(n.value);return!isNaN(e)&&e>t?{max:{max:t,actual:n.value}}:null}}},{key:"required",value:function(t){return Z(t.value)?{required:!0}:null}},{key:"requiredTrue",value:function(t){return!0===t.value?null:{required:!0}}},{key:"email",value:function(t){return Z(t.value)?null:H.test(t.value)?null:{email:!0}}},{key:"minLength",value:function(t){return function(n){if(Z(n.value))return null;var e=n.value?n.value.length:0;return e<t?{minlength:{requiredLength:t,actualLength:e}}:null}}},{key:"maxLength",value:function(t){return function(n){var e=n.value?n.value.length:0;return e>t?{maxlength:{requiredLength:t,actualLength:e}}:null}}},{key:"pattern",value:function(n){return n?("string"==typeof n?(i="","^"!==n.charAt(0)&&(i+="^"),i+=n,"$"!==n.charAt(n.length-1)&&(i+="$"),e=new RegExp(i)):(i=n.toString(),e=n),function(t){if(Z(t.value))return null;var n=t.value;return e.test(n)?null:{pattern:{requiredPattern:i,actualValue:n}}}):t.nullValidator;var e,i}},{key:"nullValidator",value:function(t){return null}},{key:"compose",value:function(t){if(!t)return null;var n=t.filter(Q);return 0==n.length?null:function(t){return tt(function(t,n){return n.map((function(n){return n(t)}))}(t,n))}}},{key:"composeAsync",value:function(t){if(!t)return null;var n=t.filter(Q);return 0==n.length?null:function(t){var e=function(t,n){return n.map((function(n){return n(t)}))}(t,n).map(X);return Object(R.a)(e).pipe(Object(F.a)(tt))}}}]),t}();function Q(t){return null!=t}function X(t){var n=Object(i["\u0275isPromise"])(t)?Object(T.a)(t):t;if(!Object(i["\u0275isObservable"])(n))throw new Error("Expected validator to return Promise or Observable.");return n}function tt(t){var n=t.reduce((function(t,n){return null!=n?Object.assign({},t,n):t}),{});return 0===Object.keys(n).length?null:n}function nt(t){return t.validate?function(n){return t.validate(n)}:t}function et(t){return t.validate?function(n){return t.validate(n)}:t}var it=function(){function t(){_classCallCheck(this,t),this._accessors=[]}return _createClass(t,[{key:"add",value:function(t,n){this._accessors.push([t,n])}},{key:"remove",value:function(t){for(var n=this._accessors.length-1;n>=0;--n)if(this._accessors[n][1]===t)return void this._accessors.splice(n,1)}},{key:"select",value:function(t){var n=this;this._accessors.forEach((function(e){n._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)}))}},{key:"_isSameGroup",value:function(t,n){return!!t[0].control&&t[0]._parent===n._control._parent&&t[1].name===n.name}}]),t}(),ot='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',rt='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',lt=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"controlParentException",value:function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ".concat(ot))}},{key:"ngModelGroupException",value:function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '.concat(rt,'\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        \n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>'))}},{key:"missingFormException",value:function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       ".concat(ot))}},{key:"groupParentException",value:function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      ".concat(rt))}},{key:"arrayParentException",value:function(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')}},{key:"disabledAttrWarning",value:function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}},{key:"ngModelWarning",value:function(t){console.warn("\n    It looks like you're using ngModel on the same form field as ".concat(t,". \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/").concat("formControl"===t?"FormControlDirective":"FormControlName","#use-with-ngmodel\n    "))}}]),t}();function at(t,n){t||ht(n,"Cannot find control with"),n.valueAccessor||ht(n,"No value accessor for form control with"),t.validator=K.compose([t.validator,n.validator]),t.asyncValidator=K.composeAsync([t.asyncValidator,n.asyncValidator]),n.valueAccessor.writeValue(t.value),function(t,n){n.valueAccessor.registerOnChange((function(e){t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&ut(t,n)}))}(t,n),function(t,n){t.registerOnChange((function(t,e){n.valueAccessor.writeValue(t),e&&n.viewToModelUpdate(t)}))}(t,n),function(t,n){n.valueAccessor.registerOnTouched((function(){t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&ut(t,n),"submit"!==t.updateOn&&t.markAsTouched()}))}(t,n),n.valueAccessor.setDisabledState&&t.registerOnDisabledChange((function(t){n.valueAccessor.setDisabledState(t)})),n._rawValidators.forEach((function(n){n.registerOnValidatorChange&&n.registerOnValidatorChange((function(){return t.updateValueAndValidity()}))})),n._rawAsyncValidators.forEach((function(n){n.registerOnValidatorChange&&n.registerOnValidatorChange((function(){return t.updateValueAndValidity()}))}))}function ut(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function st(t,n){null==t&&ht(n,"Cannot find control with"),t.validator=K.compose([t.validator,n.validator]),t.asyncValidator=K.composeAsync([t.asyncValidator,n.asyncValidator])}function ct(t){return ht(t,"There is no FormControl instance attached to form control element with")}function ht(t,n){var e;throw e=t.path.length>1?"path: '".concat(t.path.join(" -> "),"'"):t.path[0]?"name: '".concat(t.path,"'"):"unspecified name attribute",new Error("".concat(n," ").concat(e))}function dt(t){return null!=t?K.compose(t.map(nt)):null}function ft(t){return null!=t?K.composeAsync(t.map(et)):null}var pt=[function(){function t(n,e){_classCallCheck(this,t),this._renderer=n,this._elementRef=e,this.onChange=function(t){},this.onTouched=function(){}}return _createClass(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}},{key:"registerOnChange",value:function(t){this.onChange=t}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}(),function(){function t(n,e){_classCallCheck(this,t),this._renderer=n,this._elementRef=e,this.onChange=function(t){},this.onTouched=function(){}}return _createClass(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}},{key:"registerOnChange",value:function(t){this.onChange=function(n){t(""==n?null:parseFloat(n))}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}(),function(){function t(n,e){_classCallCheck(this,t),this._renderer=n,this._elementRef=e,this.onChange=function(t){},this.onTouched=function(){}}return _createClass(t,[{key:"writeValue",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}},{key:"registerOnChange",value:function(t){this.onChange=function(n){t(""==n?null:parseFloat(n))}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}]),t}(),function(){function t(n,e){_classCallCheck(this,t),this._renderer=n,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){},this._compareWith=i["\u0275looseIdentical"]}return _createClass(t,[{key:"writeValue",value:function(t){this.value=t;var n=this._getOptionId(t);null==n&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);var e=function(t,n){return null==t?"".concat(n):(n&&"object"==typeof n&&(n="Object"),"".concat(t,": ").concat(n).slice(0,50))}(n,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",e)}},{key:"registerOnChange",value:function(t){var n=this;this.onChange=function(e){n.value=n._getOptionValue(e),t(n.value)}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_registerOption",value:function(){return(this._idCounter++).toString()}},{key:"_getOptionId",value:function(t){for(var n=0,e=Array.from(this._optionMap.keys());n<e.length;n++){var i=e[n];if(this._compareWith(this._optionMap.get(i),t))return i}return null}},{key:"_getOptionValue",value:function(t){var n=function(t){return t.split(":")[0]}(t);return this._optionMap.has(n)?this._optionMap.get(n):t}},{key:"compareWith",set:function(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received ".concat(JSON.stringify(t)));this._compareWith=t}}]),t}(),function(){function t(n,e){_classCallCheck(this,t),this._renderer=n,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){},this._compareWith=i["\u0275looseIdentical"]}return _createClass(t,[{key:"writeValue",value:function(t){var n,e=this;if(this.value=t,Array.isArray(t)){var i=t.map((function(t){return e._getOptionId(t)}));n=function(t,n){t._setSelected(i.indexOf(n.toString())>-1)}}else n=function(t,n){t._setSelected(!1)};this._optionMap.forEach(n)}},{key:"registerOnChange",value:function(t){var n=this;this.onChange=function(e){var i=[];if(e.hasOwnProperty("selectedOptions"))for(var o=e.selectedOptions,r=0;r<o.length;r++){var l=o.item(r),a=n._getOptionValue(l.value);i.push(a)}else for(var u=e.options,s=0;s<u.length;s++){var c=u.item(s);if(c.selected){var h=n._getOptionValue(c.value);i.push(h)}}n.value=i,t(i)}}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_registerOption",value:function(t){var n=(this._idCounter++).toString();return this._optionMap.set(n,t),n}},{key:"_getOptionId",value:function(t){for(var n=0,e=Array.from(this._optionMap.keys());n<e.length;n++){var i=e[n];if(this._compareWith(this._optionMap.get(i)._value,t))return i}return null}},{key:"_getOptionValue",value:function(t){var n=function(t){return t.split(":")[0]}(t);return this._optionMap.has(n)?this._optionMap.get(n)._value:t}},{key:"compareWith",set:function(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received ".concat(JSON.stringify(t)));this._compareWith=t}}]),t}(),function(){function t(n,e,i,o){_classCallCheck(this,t),this._renderer=n,this._elementRef=e,this._registry=i,this._injector=o,this.onChange=function(){},this.onTouched=function(){}}return _createClass(t,[{key:"ngOnInit",value:function(){this._control=this._injector.get($),this._checkName(),this._registry.add(this._control,this)}},{key:"ngOnDestroy",value:function(){this._registry.remove(this)}},{key:"writeValue",value:function(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}},{key:"registerOnChange",value:function(t){var n=this;this._fn=t,this.onChange=function(){t(n.value),n._registry.select(n)}}},{key:"fireUncheck",value:function(t){this.writeValue(t)}},{key:"registerOnTouched",value:function(t){this.onTouched=t}},{key:"setDisabledState",value:function(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}},{key:"_checkName",value:function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}},{key:"_throwNameError",value:function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}]),t}()];function gt(t){var n=yt(t)?t.validators:t;return Array.isArray(n)?dt(n):n||null}function vt(t,n){var e=yt(n)?n.asyncValidators:t;return Array.isArray(e)?ft(e):e||null}function yt(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}var mt,_t=function(){function t(n,e){_classCallCheck(this,t),this.validator=n,this.asyncValidator=e,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}return _createClass(t,[{key:"setValidators",value:function(t){this.validator=gt(t)}},{key:"setAsyncValidators",value:function(t){this.asyncValidator=vt(t)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild((function(t){return t.markAllAsTouched()}))}},{key:"markAsUntouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild((function(t){t.markAsUntouched({onlySelf:!0})})),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}},{key:"markAsDirty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}},{key:"markAsPristine",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild((function(t){t.markAsPristine({onlySelf:!0})})),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}},{key:"markAsPending",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}},{key:"disable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild((function(n){n.disable(Object.assign({},t,{onlySelf:!0}))})),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign({},t,{skipPristineCheck:n})),this._onDisabledChange.forEach((function(t){return t(!0)}))}},{key:"enable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild((function(n){n.enable(Object.assign({},t,{onlySelf:!0}))})),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign({},t,{skipPristineCheck:n})),this._onDisabledChange.forEach((function(t){return t(!1)}))}},{key:"_updateAncestors",value:function(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(t){this._parent=t}},{key:"updateValueAndValidity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}},{key:"_updateTreeValidity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild((function(n){return n._updateTreeValidity(t)})),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(t){var n=this;if(this.asyncValidator){this.status="PENDING";var e=X(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe((function(e){return n.setErrors(e,{emitEvent:t})}))}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}},{key:"setErrors",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=t,this._updateControlsErrors(!1!==n.emitEvent)}},{key:"get",value:function(t){return function(t,n,e){return null==n?null:(n instanceof Array||(n=n.split(".")),n instanceof Array&&0===n.length?null:n.reduce((function(t,n){return t instanceof kt?t.controls.hasOwnProperty(n)?t.controls[n]:null:t instanceof bt&&t.at(n)||null}),t))}(this,t)}},{key:"getError",value:function(t,n){var e=n?this.get(n):this;return e&&e.errors?e.errors[t]:null}},{key:"hasError",value:function(t,n){return!!this.getError(t,n)}},{key:"_updateControlsErrors",value:function(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}},{key:"_initObservables",value:function(){this.valueChanges=new i.EventEmitter,this.statusChanges=new i.EventEmitter}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}},{key:"_anyControlsHaveStatus",value:function(t){return this._anyControls((function(n){return n.status===t}))}},{key:"_anyControlsDirty",value:function(){return this._anyControls((function(t){return t.dirty}))}},{key:"_anyControlsTouched",value:function(){return this._anyControls((function(t){return t.touched}))}},{key:"_updatePristine",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}},{key:"_updateTouched",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}},{key:"_isBoxedValue",value:function(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}},{key:"_registerOnCollectionChange",value:function(t){this._onCollectionChange=t}},{key:"_setUpdateStrategy",value:function(t){yt(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}},{key:"_parentMarkedDirty",value:function(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}},{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return"VALID"===this.status}},{key:"invalid",get:function(){return"INVALID"===this.status}},{key:"pending",get:function(){return"PENDING"==this.status}},{key:"disabled",get:function(){return"DISABLED"===this.status}},{key:"enabled",get:function(){return"DISABLED"!==this.status}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"root",get:function(){for(var t=this;t._parent;)t=t._parent;return t}}]),t}(),Ct=function(t){_inherits(e,t);var n=_createSuper(e);function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return _classCallCheck(this,e),(t=n.call(this,gt(o),vt(r,o)))._onChange=[],t._applyFormState(i),t._setUpdateStrategy(o),t.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),t._initObservables(),t}return _createClass(e,[{key:"setValue",value:function(t){var n=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach((function(t){return t(n.value,!1!==e.emitViewToModelChange)})),this.updateValueAndValidity(e)}},{key:"patchValue",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(t,n)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(t){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(t){this._onChange.push(t)}},{key:"_clearChangeFns",value:function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}}},{key:"registerOnDisabledChange",value:function(t){this._onDisabledChange.push(t)}},{key:"_forEachChild",value:function(t){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}]),e}(_t),kt=function(t){_inherits(e,t);var n=_createSuper(e);function e(t,i,o){var r;return _classCallCheck(this,e),(r=n.call(this,gt(i),vt(o,i))).controls=t,r._initObservables(),r._setUpdateStrategy(i),r._setUpControls(),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r}return _createClass(e,[{key:"registerControl",value:function(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}},{key:"addControl",value:function(t,n){this.registerControl(t,n),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"removeControl",value:function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setControl",value:function(t,n){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"contains",value:function(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}},{key:"setValue",value:function(t){var n=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(t),Object.keys(t).forEach((function(i){n._throwIfControlMissing(i),n.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})})),this.updateValueAndValidity(e)}},{key:"patchValue",value:function(t){var n=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(t).forEach((function(i){n.controls[i]&&n.controls[i].patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})})),this.updateValueAndValidity(e)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(e,i){e.reset(t[i],{onlySelf:!0,emitEvent:n.emitEvent})})),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}},{key:"getRawValue",value:function(){return this._reduceChildren({},(function(t,n,e){return t[e]=n instanceof Ct?n.value:n.getRawValue(),t}))}},{key:"_syncPendingControls",value:function(){var t=this._reduceChildren(!1,(function(t,n){return!!n._syncPendingControls()||t}));return t&&this.updateValueAndValidity({onlySelf:!0}),t}},{key:"_throwIfControlMissing",value:function(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error("Cannot find form control with name: ".concat(t,"."))}},{key:"_forEachChild",value:function(t){var n=this;Object.keys(this.controls).forEach((function(e){return t(n.controls[e],e)}))}},{key:"_setUpControls",value:function(){var t=this;this._forEachChild((function(n){n.setParent(t),n._registerOnCollectionChange(t._onCollectionChange)}))}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(t){var n=this,e=!1;return this._forEachChild((function(i,o){e=e||n.contains(o)&&t(i)})),e}},{key:"_reduceValue",value:function(){var t=this;return this._reduceChildren({},(function(n,e,i){return(e.enabled||t.disabled)&&(n[i]=e.value),n}))}},{key:"_reduceChildren",value:function(t,n){var e=t;return this._forEachChild((function(t,i){e=n(e,t,i)})),e}},{key:"_allControlsDisabled",value:function(){for(var t=0,n=Object.keys(this.controls);t<n.length;t++){var e=n[t];if(this.controls[e].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(t){this._forEachChild((function(n,e){if(void 0===t[e])throw new Error("Must supply a value for form control with name: '".concat(e,"'."))}))}}]),e}(_t),bt=function(t){_inherits(e,t);var n=_createSuper(e);function e(t,i,o){var r;return _classCallCheck(this,e),(r=n.call(this,gt(i),vt(o,i))).controls=t,r._initObservables(),r._setUpdateStrategy(i),r._setUpControls(),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r}return _createClass(e,[{key:"at",value:function(t){return this.controls[t]}},{key:"push",value:function(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"insert",value:function(t,n){this.controls.splice(t,0,n),this._registerControl(n),this.updateValueAndValidity()}},{key:"removeAt",value:function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),this.controls.splice(t,1),this.updateValueAndValidity()}},{key:"setControl",value:function(t,n){this.controls[t]&&this.controls[t]._registerOnCollectionChange((function(){})),this.controls.splice(t,1),n&&(this.controls.splice(t,0,n),this._registerControl(n)),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setValue",value:function(t){var n=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(t),t.forEach((function(t,i){n._throwIfControlMissing(i),n.at(i).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})})),this.updateValueAndValidity(e)}},{key:"patchValue",value:function(t){var n=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.forEach((function(t,i){n.at(i)&&n.at(i).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})})),this.updateValueAndValidity(e)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild((function(e,i){e.reset(t[i],{onlySelf:!0,emitEvent:n.emitEvent})})),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}},{key:"getRawValue",value:function(){return this.controls.map((function(t){return t instanceof Ct?t.value:t.getRawValue()}))}},{key:"clear",value:function(){this.controls.length<1||(this._forEachChild((function(t){return t._registerOnCollectionChange((function(){}))})),this.controls.splice(0),this.updateValueAndValidity())}},{key:"_syncPendingControls",value:function(){var t=this.controls.reduce((function(t,n){return!!n._syncPendingControls()||t}),!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}},{key:"_throwIfControlMissing",value:function(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index ".concat(t))}},{key:"_forEachChild",value:function(t){this.controls.forEach((function(n,e){t(n,e)}))}},{key:"_updateValue",value:function(){var t=this;this.value=this.controls.filter((function(n){return n.enabled||t.disabled})).map((function(t){return t.value}))}},{key:"_anyControls",value:function(t){return this.controls.some((function(n){return n.enabled&&t(n)}))}},{key:"_setUpControls",value:function(){var t=this;this._forEachChild((function(n){return t._registerControl(n)}))}},{key:"_checkAllValuesPresent",value:function(t){this._forEachChild((function(n,e){if(void 0===t[e])throw new Error("Must supply a value for form control at index: ".concat(e,"."))}))}},{key:"_allControlsDisabled",value:function(){var t,n=_createForOfIteratorHelper(this.controls);try{for(n.s();!(t=n.n()).done;){if(t.value.enabled)return!1}}catch(e){n.e(e)}finally{n.f()}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}},{key:"length",get:function(){return this.controls.length}}]),e}(_t),Ot=new i.InjectionToken("NgFormSelectorWarning"),wt=function t(){_classCallCheck(this,t)},Vt=new i.InjectionToken("NgModelWithFormControlWarning"),At=((mt=function(t){_inherits(e,t);var n=_createSuper(e);function e(t,o,r,l){var a;return _classCallCheck(this,e),(a=n.call(this))._ngModelWarningConfig=l,a.update=new i.EventEmitter,a._ngModelWarningSent=!1,a._rawValidators=t||[],a._rawAsyncValidators=o||[],a.valueAccessor=function(t,n){if(!n)return null;Array.isArray(n)||ht(t,"Value accessor was not provided as an array for form control with");var e=void 0,i=void 0,o=void 0;return n.forEach((function(n){var r;n.constructor===L?e=n:(r=n,pt.some((function(t){return r.constructor===t}))?(i&&ht(t,"More than one built-in value accessor matches form control with"),i=n):(o&&ht(t,"More than one custom value accessor matches form control with"),o=n))})),o||i||e||(ht(t,"No valid value accessor for form control with"),null)}(_assertThisInitialized(a),r),a}return _createClass(e,[{key:"ngOnChanges",value:function(t){var n,o;this._isControlChanged(t)&&(at(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),function(t,n){if(!t.hasOwnProperty("model"))return!1;var e=t.model;return!!e.isFirstChange()||!Object(i["\u0275looseIdentical"])(n,e.currentValue)}(t,this.viewModel)&&(n=e,o=this._ngModelWarningConfig,Object(i.isDevMode)()&&"never"!==o&&((null!==o&&"once"!==o||n._ngModelWarningSentOnce)&&("always"!==o||this._ngModelWarningSent)||(lt.ngModelWarning("formControl"),n._ngModelWarningSentOnce=!0,this._ngModelWarningSent=!0)),this.form.setValue(this.model),this.viewModel=this.model)}},{key:"viewToModelUpdate",value:function(t){this.viewModel=t,this.update.emit(t)}},{key:"_isControlChanged",value:function(t){return t.hasOwnProperty("form")}},{key:"isDisabled",set:function(t){lt.disabledAttrWarning()}},{key:"path",get:function(){return[]}},{key:"validator",get:function(){return dt(this._rawValidators)}},{key:"asyncValidator",get:function(){return ft(this._rawAsyncValidators)}},{key:"control",get:function(){return this.form}}]),e}($))._ngModelWarningSentOnce=!1,mt),Et=function(t){_inherits(e,t);var n=_createSuper(e);function e(t,o){var r;return _classCallCheck(this,e),(r=n.call(this))._validators=t,r._asyncValidators=o,r.submitted=!1,r.directives=[],r.form=null,r.ngSubmit=new i.EventEmitter,r}return _createClass(e,[{key:"ngOnChanges",value:function(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}},{key:"addControl",value:function(t){var n=this.form.get(t.path);return at(n,t),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),n}},{key:"getControl",value:function(t){return this.form.get(t.path)}},{key:"removeControl",value:function(t){var n,e,i;n=this.directives,e=t,(i=n.indexOf(e))>-1&&n.splice(i,1)}},{key:"addFormGroup",value:function(t){var n=this.form.get(t.path);st(n,t),n.updateValueAndValidity({emitEvent:!1})}},{key:"removeFormGroup",value:function(t){}},{key:"getFormGroup",value:function(t){return this.form.get(t.path)}},{key:"addFormArray",value:function(t){var n=this.form.get(t.path);st(n,t),n.updateValueAndValidity({emitEvent:!1})}},{key:"removeFormArray",value:function(t){}},{key:"getFormArray",value:function(t){return this.form.get(t.path)}},{key:"updateModel",value:function(t,n){this.form.get(t.path).setValue(n)}},{key:"onSubmit",value:function(t){return this.submitted=!0,n=this.directives,this.form._syncPendingControls(),n.forEach((function(t){var n=t.control;"submit"===n.updateOn&&n._pendingChange&&(t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})),this.ngSubmit.emit(t),!1;var n}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(t){this.form.reset(t),this.submitted=!1}},{key:"_updateDomValue",value:function(){var t=this;this.directives.forEach((function(n){var e=t.form.get(n.path);n.control!==e&&(function(t,n){n.valueAccessor.registerOnChange((function(){return ct(n)})),n.valueAccessor.registerOnTouched((function(){return ct(n)})),n._rawValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(null)})),n._rawAsyncValidators.forEach((function(t){t.registerOnValidatorChange&&t.registerOnValidatorChange(null)})),t&&t._clearChangeFns()}(n.control,n),e&&at(e,n),n.control=e)})),this.form._updateTreeValidity({emitEvent:!1})}},{key:"_updateRegistrations",value:function(){var t=this;this.form._registerOnCollectionChange((function(){return t._updateDomValue()})),this._oldForm&&this._oldForm._registerOnCollectionChange((function(){})),this._oldForm=this.form}},{key:"_updateValidators",value:function(){var t=dt(this._validators);this.form.validator=K.compose([this.form.validator,t]);var n=ft(this._asyncValidators);this.form.asyncValidator=K.composeAsync([this.form.asyncValidator,n])}},{key:"_checkFormPresent",value:function(){this.form||lt.missingFormException()}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}}]),e}(U),Pt=function t(){_classCallCheck(this,t)},zt=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"group",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=this._reduceControls(t),i=null,o=null,r=void 0;return null!=n&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(n)?(i=null!=n.validators?n.validators:null,o=null!=n.asyncValidators?n.asyncValidators:null,r=null!=n.updateOn?n.updateOn:void 0):(i=null!=n.validator?n.validator:null,o=null!=n.asyncValidator?n.asyncValidator:null)),new kt(e,{asyncValidators:o,updateOn:r,validators:i})}},{key:"control",value:function(t,n,e){return new Ct(t,n,e)}},{key:"array",value:function(t,n,e){var i=this,o=t.map((function(t){return i._createControl(t)}));return new bt(o,n,e)}},{key:"_reduceControls",value:function(t){var n=this,e={};return Object.keys(t).forEach((function(i){e[i]=n._createControl(t[i])})),e}},{key:"_createControl",value:function(t){return t instanceof Ct||t instanceof kt||t instanceof bt?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}]),t}(),St=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"withConfig",value:function(n){return{ngModule:t,providers:[{provide:Ot,useValue:n.warnOnDeprecatedNgFormSelector}]}}}]),t}(),xt=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"withConfig",value:function(n){return{ngModule:t,providers:[{provide:Vt,useValue:n.warnOnNgModelWithFormControl}]}}}]),t}(),It=function(){function t(n){_classCallCheck(this,t),this.changeDetectorRef=n,this.change=new i.EventEmitter,this.loaded=!1,this.loading=!1,this._toppings=[]}return _createClass(t,[{key:"refreshRender",value:function(){var t=this;setTimeout((function(){Promise.resolve(null).then((function(){t.changeDetectorRef.markForCheck()}))}),17)}},{key:"toggleSelection",value:function(t){t.selected=!t.selected;var n=this._toppings.filter((function(t){return t.selected}));this.change.emit(n),this.refreshRender()}},{key:"toppings",set:function(t){this._toppings=JSON.parse(JSON.stringify(t))},get:function(){return this._toppings}},{key:"initialSelection",set:function(t){var n=this;this._initialSelection=t,this._toppings&&this._toppings.length&&t.forEach((function(t){var e=n._toppings.find((function(n){return n.value===t.value}));e&&(e.selected=!0)})),this.refreshRender()}}]),t}(),Mt=i["\u0275crt"]({encapsulation:0,styles:[['.toppings[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.topping-single[_ngcontent-%COMP%]{cursor:pointer;background-color:#f5f5f5;display:flex;flex:0 0 190px;min-height:40px;margin:11px;flex-direction:row;align-items:center;justify-content:center;border:.5px solid #c5c5c5;position:relative}.topping-single[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px;height:auto;margin-right:22px}.topping-single[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-family:cornerstone;color:#333;font-size:12px}.topping-single.selected[_ngcontent-%COMP%]{background-color:#fff}.topping-single.selected[_ngcontent-%COMP%]:after{content:"";border-radius:50%;background:url(/assets/img/checked.svg) center center/10px no-repeat #19b55f;width:16px;height:16px;position:absolute;top:-5px;right:-5px}']],data:{}});function Dt(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,7,null,null,null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,6,"div",[],null,[[null,"click"]],(function(t,n,e){var i=!0;return"click"===n&&(i=!1!==t.component.toggleSelection(t.context.$implicit)&&i),i}),null,null)),i["\u0275prd"](512,null,v["\u0275NgClassImpl"],v["\u0275NgClassR2Impl"],[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2]),i["\u0275did"](3,278528,null,0,v.NgClass,[v["\u0275NgClassImpl"]],{ngClass:[0,"ngClass"]},null),i["\u0275pod"](4,{"topping-single":0,selected:1}),(t()(),i["\u0275eld"](5,0,null,null,0,"img",[],[[8,"src",4]],null,null,null,null)),(t()(),i["\u0275eld"](6,0,null,null,1,"div",[["class","text"]],null,null,null,null,null)),(t()(),i["\u0275ted"](7,null,[" "," "]))],(function(t,n){var e=t(n,4,0,!0,n.context.$implicit.selected);t(n,3,0,e)}),(function(t,n){t(n,5,0,i["\u0275inlineInterpolate"](1,"/assets/img/pizza-toppings/singles/",n.context.$implicit.svgFileName,"")),t(n,7,0,n.context.$implicit.label)}))}function Nt(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"div",[["class","toppings"]],null,null,null,null,null)),(t()(),i["\u0275and"](16777216,null,null,1,null,Dt)),i["\u0275did"](2,278528,null,0,v.NgForOf,[i.ViewContainerRef,i.TemplateRef,i.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(t,n){t(n,2,0,n.component._toppings)}),null)}function Rt(t){return i["\u0275vid"](2,[(t()(),i["\u0275and"](16777216,null,null,1,null,Nt)),i["\u0275did"](1,16384,null,0,v.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(t,n){var e=n.component;t(n,1,0,e._toppings&&e._toppings.length)}),null)}var Tt=function(){function t(n,e){_classCallCheck(this,t),this.presenter=n,this.changeDetectorRef=e,this.loaded=!1,this.loading=!1,this.action="create"}return _createClass(t,[{key:"ngOnInit",value:function(){this.presenter.controller=this}},{key:"refreshRender",value:function(){var t=this;setTimeout((function(){Promise.resolve(null).then((function(){t.changeDetectorRef.markForCheck()}))}),17)}},{key:"onToppingsSelectionChange",value:function(t){this.product&&(this.product.toppings=_toConsumableArray(t),this.pizzaDisplay&&this.pizzaDisplay.refreshRender())}},{key:"submit",value:function(){this.presenter.submit()}},{key:"submitButtonText",get:function(){return"create"===this.action?"Crear":"Actualizar"}}]),t}(),Ft=function(){function t(n,e,i,o){_classCallCheck(this,t),this.domain=n,this.toppingsDomain=e,this.toasterNotificationsService=i,this.router=o}return _createClass(t,[{key:"initialize",value:function(){if(this._controller)if(this._controller.loading=!0,"create"===this._controller.action)this.initialize2Create();else{var t=this.getModelId(this._controller.product);t&&this.domain.read(t).pipe(Object(l.a)(1)).subscribe({next:this.initialize2Update.bind(this),complete:this.initializeEnd.bind(this),error:this.onAPIError.bind(this)})}}},{key:"initialize2Create",value:function(){this._controller&&(this._controller.product=new u({}),this._controller.pizzaNameFormControl=new Ct,this._controller.pizzaNameFormControl.setValue(""),this.handleNameChange(),this._controller.pizzaFormGroup=new kt({name:this._controller.pizzaNameFormControl}),this.initialize3())}},{key:"initialize2Update",value:function(t){this._controller&&(this._controller.product=t,this._controller.pizzaNameFormControl=new Ct,this._controller.pizzaNameFormControl.setValue(t.name),this.handleNameChange(),this._controller.pizzaFormGroup=new kt({name:this._controller.pizzaNameFormControl}),this.initialize3())}},{key:"handleNameChange",value:function(){var t=this;this._controller&&this._controller.pizzaNameFormControl&&(this.productNameChangeSubscription&&this.productNameChangeSubscription.unsubscribe(),this.productNameChangeSubscription=this._controller.pizzaNameFormControl.valueChanges.subscribe((function(n){t._controller&&t._controller.product&&(t._controller.product.name=n)})))}},{key:"initialize3",value:function(){var t=this;this.toppingsDomain.readAll().pipe(Object(l.a)(1)).subscribe({next:function(n){t._controller&&(t._controller.toppings=n)},complete:this.initializeEnd.bind(this),error:this.onAPIError.bind(this)})}},{key:"onAPIError",value:function(t){this._controller&&(this._controller.loading=!1,this._controller.loaded=!0),console.log("Error @product-single-presenter: ",t.message)}},{key:"initializeEnd",value:function(){this._controller&&(this._controller.loaded=!0,this._controller.loading=!1,this._controller.refreshRender())}},{key:"getModelId",value:function(t){if(t&&t.id&&"string"==typeof t.id&&t.id.length>0)return t.id}},{key:"submit",value:function(){if(this._controller&&this._controller.product){this._controller.loading=!0,this._controller.refreshRender();var t=this._controller.product;"create"===this._controller.action?this.submitCreate(t):"update"===this.controller.action&&this.submitUpdate(t)}}},{key:"submitCreate",value:function(t){var n=this;this.domain.create(t).pipe(Object(l.a)(1)).subscribe({next:function(){n.router.navigate(["/products/list"]),n.toasterNotificationsService.success("Creaci\xf3n Exitosa","Se ha creado Pizza: ".concat(t.name))},complete:function(){n._controller&&(n._controller.loading=!1,n._controller.refreshRender())},error:this.onAPIError.bind(this)})}},{key:"submitUpdate",value:function(t){var n=this;this.domain.update(t).pipe(Object(l.a)(1)).subscribe({next:function(){n.router.navigate(["/products/list"]),n.toasterNotificationsService.success("Actualizaci\xf3n Exitosa","Se ha actualizado la Pizza.")},complete:function(){n._controller&&(n._controller.loading=!1,n._controller.refreshRender())},error:this.onAPIError.bind(this)})}},{key:"controller",set:function(t){this._controller=t,this.initialize()},get:function(){return this._controller}}]),t}(),jt=i["\u0275crt"]({encapsulation:0,styles:[[".pizza[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column;position:relative}app-product-pizza-display-component[_ngcontent-%COMP%]{height:183px}.toppings-wrapper[_ngcontent-%COMP%], .visualization-wrapper[_ngcontent-%COMP%], form[_ngcontent-%COMP%]{margin:22px;background-color:#f5f5f5}.visualization-wrapper[_ngcontent-%COMP%]{text-align:center}form[_ngcontent-%COMP%], form[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{display:flex;flex:0 1 auto;align-items:center;border:0;font-family:cornerstone;color:#333;font-size:16px;height:22px;padding:0 22px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;-moz-appearance:none;border:none;background-image:none;background-color:transparent;box-shadow:none}.action[_ngcontent-%COMP%]{text-align:right;margin:22px}.action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;height:32px;border:0;background-color:#08503f;border-radius:4px;font-family:cornerstone;font-size:16px;color:#fff}.action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0f9675}"]],data:{}});function Gt(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,12,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],(function(t,n,e){var o=!0;return"submit"===n&&(o=!1!==i["\u0275nov"](t,2).onSubmit(e)&&o),"reset"===n&&(o=!1!==i["\u0275nov"](t,2).onReset()&&o),o}),null,null)),i["\u0275did"](1,16384,null,0,wt,[],null,null),i["\u0275did"](2,540672,null,0,Et,[[8,null],[8,null]],{form:[0,"form"]},null),i["\u0275prd"](2048,null,U,null,[Et]),i["\u0275did"](4,16384,null,0,J,[[4,U]],null,null),(t()(),i["\u0275eld"](5,0,null,null,7,"div",[["class","pizza-name"]],null,null,null,null,null)),(t()(),i["\u0275ted"](-1,null,[" Nombre de Pizza: "])),(t()(),i["\u0275eld"](7,0,null,null,5,"input",[["placeholder","ejm Pepperoni"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,n,e){var o=!0;return"input"===n&&(o=!1!==i["\u0275nov"](t,8)._handleInput(e.target.value)&&o),"blur"===n&&(o=!1!==i["\u0275nov"](t,8).onTouched()&&o),"compositionstart"===n&&(o=!1!==i["\u0275nov"](t,8)._compositionStart()&&o),"compositionend"===n&&(o=!1!==i["\u0275nov"](t,8)._compositionEnd(e.target.value)&&o),o}),null,null)),i["\u0275did"](8,16384,null,0,L,[i.Renderer2,i.ElementRef,[2,G]],null,null),i["\u0275prd"](1024,null,j,(function(t){return[t]}),[L]),i["\u0275did"](10,540672,null,0,At,[[8,null],[8,null],[6,j],[2,Vt]],{form:[0,"form"]},null),i["\u0275prd"](2048,null,$,null,[At]),i["\u0275did"](12,16384,null,0,q,[[4,$]],null,null)],(function(t,n){var e=n.component;t(n,2,0,e.pizzaFormGroup),t(n,10,0,e.pizzaNameFormControl)}),(function(t,n){t(n,0,0,i["\u0275nov"](n,4).ngClassUntouched,i["\u0275nov"](n,4).ngClassTouched,i["\u0275nov"](n,4).ngClassPristine,i["\u0275nov"](n,4).ngClassDirty,i["\u0275nov"](n,4).ngClassValid,i["\u0275nov"](n,4).ngClassInvalid,i["\u0275nov"](n,4).ngClassPending),t(n,7,0,i["\u0275nov"](n,12).ngClassUntouched,i["\u0275nov"](n,12).ngClassTouched,i["\u0275nov"](n,12).ngClassPristine,i["\u0275nov"](n,12).ngClassDirty,i["\u0275nov"](n,12).ngClassValid,i["\u0275nov"](n,12).ngClassInvalid,i["\u0275nov"](n,12).ngClassPending)}))}function Lt(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"div",[["class","toppings-wrapper"]],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,1,"app-product-pizza-toppings-component",[],null,[[null,"change"]],(function(t,n,e){var i=!0;return"change"===n&&(i=!1!==t.component.onToppingsSelectionChange(e)&&i),i}),Rt,Mt)),i["\u0275did"](2,49152,null,0,It,[i.ChangeDetectorRef],{toppings:[0,"toppings"],initialSelection:[1,"initialSelection"]},{change:"change"})],(function(t,n){var e=n.component;t(n,2,0,e.toppings,e.product.toppings)}),null)}function Wt(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,2,"div",[["class","action"]],null,null,null,null,null)),(t()(),i["\u0275eld"](1,0,null,null,1,"button",[],[[8,"disabled",0]],[[null,"click"]],(function(t,n,e){var i=!0;return"click"===n&&(i=!1!==t.component.submit()&&i),i}),null,null)),(t()(),i["\u0275ted"](2,null,["",""]))],null,(function(t,n){var e=n.component;t(n,1,0,e.loading),t(n,2,0,e.submitButtonText)}))}function Ut(t){return i["\u0275vid"](2,[i["\u0275qud"](402653184,1,{pizzaDisplay:0}),(t()(),i["\u0275eld"](1,0,null,null,2,"div",[["class","visualization-wrapper"]],null,null,null,null,null)),(t()(),i["\u0275eld"](2,0,null,null,1,"app-product-pizza-display-component",[],null,null,null,w,_)),i["\u0275did"](3,49152,[[1,4]],0,m,[i.ChangeDetectorRef],{enableEditAction:[0,"enableEditAction"],product:[1,"product"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,Gt)),i["\u0275did"](5,16384,null,0,v.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,Lt)),i["\u0275did"](7,16384,null,0,v.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),i["\u0275and"](16777216,null,null,1,null,Wt)),i["\u0275did"](9,16384,null,0,v.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(t,n){var e=n.component;t(n,3,0,!1,e.product),t(n,5,0,!e.loading&&e.pizzaFormGroup),t(n,7,0,e.toppings&&e.toppings.length&&e.product&&e.product.toppings),t(n,9,0,e.toppings&&e.toppings.length&&e.product&&e.product.toppings)}),null)}var Bt=i["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:flex;flex:1;flex-direction:column;position:relative}"]],data:{}});function $t(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"app-single-product-component",[],null,null,null,Ut,jt)),i["\u0275did"](1,114688,null,0,Tt,[Ft,i.ChangeDetectorRef],{action:[0,"action"],product:[1,"product"]},null)],(function(t,n){var e=n.component;t(n,1,0,e.action,e.product)}),null)}function Yt(t){return i["\u0275vid"](0,[(t()(),i["\u0275and"](16777216,null,null,1,null,$t)),i["\u0275did"](1,16384,null,0,v.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(t,n){t(n,1,0,void 0!==n.component.product)}),null)}var qt=i["\u0275ccf"]("ng-component",s,(function(t){return i["\u0275vid"](0,[(t()(),i["\u0275eld"](0,0,null,null,1,"ng-component",[],null,null,null,Yt,Bt)),i["\u0275did"](1,114688,null,0,s,[d.a],null,null)],(function(t,n){t(n,1,0)}),null)}),{},{},[]),Jt=e("AytR"),Zt=e("IheW"),Ht={"Content-Type":"application/json",Accept:"application/json"},Kt=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"getStandardOptions",value:function(t){var n=t?Object.assign({},Ht,t):Object.assign({},Ht);return{headers:new Zt.g(n)}}}]),t}(),Qt=function(t){_inherits(e,t);var n=_createSuper(e);function e(t){var i;return _classCallCheck(this,e),(i=n.call(this)).httpClient=t,i}return _createClass(e,[{key:"getAll",value:function(){var t="".concat(Jt.a.backend.host,"/").concat(Jt.a.backend.contexts.products),n=this.getStandardOptions({"Accept-Language":"es"});return this.httpClient.get(t,n)}},{key:"get",value:function(t){var n="".concat(Jt.a.backend.host,"/").concat(Jt.a.backend.contexts.products,"/").concat(t),e=this.getStandardOptions({"Accept-Language":"es"});return this.httpClient.get(n,e)}},{key:"post",value:function(t){var n="".concat(Jt.a.backend.host,"/").concat(Jt.a.backend.contexts.products),e=this.getStandardOptions();return delete t.id,delete t.date,this.httpClient.post(n,t,e)}},{key:"put",value:function(t){var n="".concat(Jt.a.backend.host,"/").concat(Jt.a.backend.contexts.products,"/").concat(t.id),e=this.getStandardOptions();return delete t.id,this.httpClient.put(n,t,e)}}]),e}(Kt),Xt=function(t){_inherits(e,t);var n=_createSuper(e);function e(t){var i;return _classCallCheck(this,e),(i=n.call(this)).httpClient=t,i}return _createClass(e,[{key:"getAll",value:function(){var t="".concat(Jt.a.backend.host,"/").concat(Jt.a.backend.contexts.pizzaToppings),n=this.getStandardOptions({"Accept-Language":"es"});return this.httpClient.get(t,n)}}]),e}(Kt),tn=function(){function t(n){_classCallCheck(this,t),this.id="",this.name="",this.displayName="",n&&this.adaptFrom(n)}return _createClass(t,[{key:"adaptFrom",value:function(t){t&&(this.id=t.value?t.value:"",this.displayName=t.label?t.label:"",this.name=t.svgFileName?t.svgFileName.substring(0,t.svgFileName.indexOf(".")):"")}}]),t}(),nn=function(){function t(n){_classCallCheck(this,t),this.id="",this.name="",this.date=Date.now(),this.toppings=[],n&&this.adaptFrom(n)}return _createClass(t,[{key:"adaptFrom",value:function(t){t&&(this.id=t.id?String(t.id):"",this.name=t.name?String(t.name):"",this.date=t.creationDate?parseInt(String(t.creationDate)):Date.now(),t.toppings&&Array.isArray(t.toppings)&&(this.toppings=t.toppings.map((function(t){return new tn(t)}))))}}]),t}(),en=function(){function t(n){_classCallCheck(this,t),this.repository=n}return _createClass(t,[{key:"readAll",value:function(){return this.adaptPizzas(this.repository.getAll())}},{key:"read",value:function(t){return this.repository.get(t).pipe(Object(F.a)((function(t){return new u(t)})))}},{key:"create",value:function(t){var n=new nn(t);return this.repository.post(n).pipe(Object(F.a)((function(){})))}},{key:"update",value:function(t){var n=new nn(t);return this.repository.put(n).pipe(Object(F.a)((function(){})))}},{key:"adaptPizzas",value:function(t){return t.pipe(Object(F.a)((function(t){return t.map((function(t){return new u(t)})).filter((function(t){return""!==t.id})).sort((function(t,n){return t.creationDate>n.creationDate?1:n.creationDate>t.creationDate?-1:0}))})))}}]),t}(),on=function(){function t(n){_classCallCheck(this,t),this.repository=n}return _createClass(t,[{key:"readAll",value:function(){var t=this.repository.getAll();return this.adaptPizzaToppings(t)}},{key:"adaptPizzaToppings",value:function(t){return t.pipe(Object(F.a)((function(t){return t.map((function(t){return new a(t)})).filter((function(t){return""!==t.value}))})))}}]),t}(),rn=e("lNG3"),ln=function t(){_classCallCheck(this,t)},an=function t(){_classCallCheck(this,t)},un=function t(){_classCallCheck(this,t)},sn=function t(){_classCallCheck(this,t)};e.d(n,"ProductsModuleNgFactory",(function(){return cn}));var cn=i["\u0275cmf"](c,[],(function(t){return i["\u0275mod"]([i["\u0275mpd"](512,i.ComponentFactoryResolver,i["\u0275CodegenComponentFactoryResolver"],[[8,[h.a,g,D,qt]],[3,i.ComponentFactoryResolver],i.NgModuleRef]),i["\u0275mpd"](4608,v.NgLocalization,v.NgLocaleLocalization,[i.LOCALE_ID,[2,v["\u0275angular_packages_common_common_a"]]]),i["\u0275mpd"](4608,it,it,[]),i["\u0275mpd"](4608,zt,zt,[]),i["\u0275mpd"](4608,Qt,Qt,[Zt.c]),i["\u0275mpd"](4608,Xt,Xt,[Zt.c]),i["\u0275mpd"](4608,en,en,[Qt]),i["\u0275mpd"](4608,on,on,[Xt]),i["\u0275mpd"](4608,A,A,[en]),i["\u0275mpd"](4608,Ft,Ft,[en,on,rn.NotificationsService,d.k]),i["\u0275mpd"](1073742336,v.CommonModule,v.CommonModule,[]),i["\u0275mpd"](1073742336,d.m,d.m,[[2,d.r],[2,d.k]]),i["\u0275mpd"](1073742336,Pt,Pt,[]),i["\u0275mpd"](1073742336,St,St,[]),i["\u0275mpd"](1073742336,xt,xt,[]),i["\u0275mpd"](1073742336,ln,ln,[]),i["\u0275mpd"](1073742336,an,an,[]),i["\u0275mpd"](1073742336,un,un,[]),i["\u0275mpd"](1073742336,sn,sn,[]),i["\u0275mpd"](1073742336,c,c,[]),i["\u0275mpd"](1024,d.i,(function(){return[[{path:"",component:o,children:[{path:"list",component:r},{path:"listado",component:r},{path:"pizza/new",component:s},{path:"pizza/:id",component:s}]}]]}),[])])}))}}]);